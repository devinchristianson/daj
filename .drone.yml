---
kind: pipeline
type: docker
name: build-pdf

steps:
- name: convert
  image: alpine:latest 
  environment:
    PASSWORD:
      from_secret: file_password
    USERNAME:
      from_secret: file_username
  commands:
  - apk add --no-cache curl bash
  - /bin/sh
  - cd ./docs/markdown/
  - ./../../.drone/convert.sh
- name: push commit
  image: appleboy/drone-git-push
  settings:
    remote_name: origin
    branch: master_pdf
    commit: true
    commit_message: [drone ci] push pdf docs
    key: 
      from_secret: deploy_key
when:
  branch:
  - master
